<!doctype html>
<html class="no-js">

<head>
    <meta charset="utf-8">
    <title>ClickableBlocks</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->

    <!--
    special styles for BIP mode
-->
    <style>
        body {
            margin: 0px;
        }

        .ClickableBlocksStep.ClickableBlocksStepHalfHour {
            border-left: none;
        }

        .ClickableBlocksStep.ClickableBlocksStepQuarter {
            border-left: none;
        }

        .ClickableBlocksStep.ClickableBlocksStepEnd {
            border-right: none;
        }
    </style>
</head>

<body>
    <div id="CB_1_parent" style="float:left; display: inline-block;"></div>

    <!-- build:js({app,.tmp}) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/jquery.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:js({app,.tmp}) scripts/main.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->
    <script>
        // test url
        //http://localhost:3000/?params={"options":{"min":360,"max":1140,"mode":"real"},"blocks":{"blocks":[{"id":1,"start":480,"value":60,"planned":"1","real":"1"}],"meal":"1","rmeal":"1"}}

        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
        var params;
        try {
            params = JSON.parse(getParameterByName('params'));
        } catch (err) {
            params = false;
        }




        if (params) {

            params.options.stepLabelDispFormat = "function (steps) {return \'\';}"
            params.options.step = 15;
            params.options.readonly = true;
            params.options.toolbar = false;
            params.options.mealbar = false;
            var blocks = params.blocks;

            // add default colors to each blocks to reduce the url length
            if (blocks.blocks) {
                blocks.blocks.forEach(function (entry) {
                    entry.coltoolbar = '#ff7c34';
                    entry.colplanned = '#ff7c34';
                    entry.colunplanned = '#ffd6b8';
                    entry.colreal = '#7bce5b';
                    entry.colunreal = '#ffd4ba';
                    entry.coladded = '#3c8a27';
                    entry.coldeleted = '#ff3d25';
                });
            }

            $(function () {
                CB_1 = new ClickB('CB_1', params.options);
                CB_1.addBlocks(params.blocks);
            });

        } else {

            $(function () {

                for (var i = 0; i < 30; i++) {
                    // inicialization - test from APEX (string insted of objects)
                    var divId = 'clickB' + i;
                    $('body').prepend('<div style="float:left" id="' + divId + '_parent"></div>');
                    var name = new ClickB(divId, '{"mealbar":false,"toolbar":false,"width":"30cm","mode":"real","min":0,"max":1440,"step":15,"readonly":false, "stepLabelDispFormat":"function (steps) {return \'\';}"}');


                    name.addBlocks({

                        "blocks": [{
                            "id": "2",
                            "start": "0",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "30",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "60",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "90",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "120",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "150",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "180",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "210",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "240",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "270",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "300",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "330",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "360",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "390",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "420",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "450",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "480",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "510",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "540",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "570",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "600",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "630",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "660",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "690",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "720",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "750",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "3",
                            "start": "780",
                            "value": "60",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "840",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "870",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "3",
                            "start": "900",
                            "value": "60",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "3",
                            "start": "960",
                            "value": "60",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "3",
                            "start": "1020",
                            "value": "60",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1080",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1110",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1140",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1170",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1200",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1230",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1260",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1290",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1320",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1350",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1380",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }, {
                            "id": "2",
                            "start": "1410",
                            "value": "30",
                            "planned": "1",
                            "real": "0",
                            "colplanned": "#ff7c34",
                            "colunplanned": "#ffd6b8",
                            "coldeleted": "#ff3d25",
                            "colreal": "#7bce5b",
                            "coladded": "#3c8a27",
                            "colunreal": "#ffd4ba"
                                }],
                        "meal": "1"
                    });


                    //because it's not possible in CSS
                    $('div.ClickableBlocksStepContentFullHour').parent().css('border-left', '2px solid #656565');
                    $('.ClickableBlocksStepEnd').css('border-right', '2px solid #656565');

                }
            });
        }
    </script>
</body>

</html>
